#template:
#  - binary_sensor:
#      - name: energy_threshold
#        icon: mdi:transmission-tower
#        state: >
#          {% set usage = states('sensor.daily_usage') %}
#          {% set threshold = states('input_number.kwh_threshold') %}
#          {% if usage not in ['unknown', 'unavailable'] and threshold not in ['unknown', 'unavailable'] %}
#            {% set average_usage = usage|float / (now().hour if now().hour > 0 else 1) %}
#            {{ average_usage > threshold|float }}
#          {% else %}
#            false
#          {% endif %}

#  - sensor:
#      - name: Current Time
#        icon: "mdi:calendar-clock"
#        state: "{{ as_timestamp(now()) | timestamp_custom('%-I:%M') }}"

#      - name: Current Date
#        icon: "mdi:calendar-clock"
#        state: "{{ as_timestamp(now()) | timestamp_custom('%A, %b %-d') }}"

#      - name: Admin PIN Masked
#        icon: mdi:dialpad
#        state: >-
#          {% set input_length = states('input_text.admin_pin_input') | length %}
#          {{ '*' * input_length }}

#      - name: "Google Ping"
#        icon: "mdi:speedometer"
#        unit_of_measurement: "ms"
#        state: "{{ state_attr('binary_sensor.google_dns_ping', 'round_trip_time_avg')|float(0)|round(2)|default(0) }}"

#      - name: "LAN Ping"
#        icon: "mdi:speedometer"
#        unit_of_measurement: "ms"
#        state: "{{ state_attr('binary_sensor.router_ping', 'round_trip_time_avg')|float(0)|round(2)|default(0) }}"